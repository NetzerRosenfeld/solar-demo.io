(self.webpackChunksolar_pro_react=self.webpackChunksolar_pro_react||[]).push([[5110,6155,6567,9840],{6155:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return s}});var r=n(3144),a=n(5671),s=(0,r.Z)((function e(){(0,a.Z)(this,e),this.fetotDirection=null,this.roofTypeId="",this.roofTypes=[],this.realspace=null,this.trapezoidUpperSize=null,this.trapezoidTypes=null,this.dataLoaded=!0,this.fetotDirection=null,this.modalTypes=null,this.modalType=null}))},5617:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return L}});var r=n(1413),a=n(4165),s=n(2982),o=n(5861),u=n(885),i=n(7313),c=n(3849),l=n(1616),p=n(3745),d=n(5484),f=n(4686),m=n(5898),h=n(7890),T=n(5958),y=n(9840),x=n(2877),Z=n(6567),j=n(817),v=n(4299),S=n(3929),D=n(4268),E=n(7397),g=n(6783),I=n(6417);function _(e){var t,n,r=new m.Z,s=(0,i.useState)([]),p=(0,u.Z)(s,2),d=p[0],h=p[1];(0,i.useEffect)((function(){Z(e.state.roofTypeId,e.state.fetotDirection)}),[e.state]);var T=function(t,n){e.updateState(t,n)},y=function(){var t=(0,o.Z)((0,a.Z)().mark((function t(n){var r,s;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n.target.value,T(r,"roofTypeId"),r!=x.Lm.FLAT&&(T("","weightType"),T("","weightSquare")),r!=x.Lm.KAL_ZIP&&T("","realspace"),r!=x.Lm.ISKURIT&&(T("","trapezoidDistance"),T("","fetotDirection"),T("","trapezoidUpperSize"),T("","trapezoidTypes")),s=e.state.roofTypes.find((function(e){return e.Key==r})).Value,T(s,"roofTypeText"),r==x.Lm.ISKURIT){t.next=10;break}return t.next=10,Z(r,e.state.fetotDirection);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();function Z(e,t){return j.apply(this,arguments)}function j(){return(j=(0,o.Z)((0,a.Z)().mark((function e(t,n){var s,o,u,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s={RoofTypeId:t,FetotDirectionId:""==n?null:n},o=JSON.stringify(s),u={name:"ModalTypes",parameters:o},e.next=5,r.Get("Data/DataSource",u);case 5:(i=e.sent)&&i.Table&&h(i.Table);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,I.jsx)(I.Fragment,{children:(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(v.Z,{className:"px-5","aria-labelledby":"roofTypes",name:"roofTypes",row:!0,value:null!==(t=e.state.roofTypeId)&&void 0!==t?t:"",onChange:y,children:Object.keys(e.state.roofTypes).map((function(t){return e.state.roofTypes[t].ImageName&&(0,I.jsx)(S.Z,{className:"px-5",sx:{mt:1,mr:1},labelPlacement:"start",value:e.state.roofTypes[t].Key,label:e.state.roofTypes[t].Value,control:(0,I.jsx)(D.Z,{icon:(0,I.jsx)(E.Z,{pWidth:130,src:e.state.roofTypes[t].ImageName}),checkedIcon:(0,I.jsx)(E.Z,{pWidth:130,class:"img-selected",src:e.state.roofTypes[t].ImageName})})},e.state.roofTypes[t].Key)}))}),e.state.roofTypeId==x.Lm.ISKURIT&&(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)("span",{className:"px-3",children:"    \u05db\u05d9\u05d5\u05d5\u05df \u05e4\u05d8\u05d5\u05ea \u05dc\u05e6\u05e4\u05d5\u05df:"}),(0,I.jsxs)(v.Z,{className:"px-3",defaultValue:"2",name:"fetot-direction",value:null!==(n=e.state.fetotDirection)&&void 0!==n?n:"",onChange:function(t){T(t.target.value,"fetotDirection"),Z(e.state.roofTypeId,t.target.value)},id:"fetot-direction",children:[(0,I.jsx)(S.Z,{value:"1",control:(0,I.jsx)(D.Z,{required:!0}),label:"\u05e4\u05d8\u05d5\u05ea \u05de\u05d0\u05d5\u05e0\u05db\u05d5\u05ea \u05dc\u05e6\u05e4\u05d5\u05df"}),(0,I.jsx)(S.Z,{value:"2",control:(0,I.jsx)(D.Z,{required:!0}),label:"\u05e4\u05d8\u05d5\u05ea \u05de\u05e7\u05d1\u05d9\u05dc\u05d5\u05ea \u05dc\u05e6\u05e4\u05d5\u05df"})]})]}),(0,I.jsx)(c.Z,{className:"mb-5 pb-5 border-top",children:(0,I.jsxs)(l.Z,{children:[e.state.roofTypeText&&(0,I.jsxs)("h3",{className:"text-center py-3",children:["\u05d2\u05d2 ",e.state.roofTypeText]}),(0,I.jsx)("div",{children:d.length>0&&(0,I.jsx)(v.Z,{name:"modalType",row:!0,value:e.state.modalType||"",onChange:function(e){var t=d.find((function(t){return t.Key==e.currentTarget.value}));T(t.Value,"modalTypeText"),T(e.currentTarget.value,"modalType")},children:Object.keys(d).map((function(e){return d[e].ImageName&&(0,I.jsx)(S.Z,{labelPlacement:"bottom",value:d[e].Key,label:d[e].Value,control:(0,I.jsx)(D.Z,{icon:(0,I.jsx)(E.Z,{pWidth:"150",pHeight:"150",src:d[e].ImageName}),checkedIcon:(0,I.jsx)(E.Z,{class:"img-selected",pWidth:"160",pHeight:"160",src:d[e].ImageName})})},d[e].Key)}))})})]})}),e.state.roofTypeId==x.Lm.FLAT&&(0,I.jsxs)(I.Fragment,{children:[(0,I.jsxs)(c.Z,{className:"px-3 pt-3",children:[(0,I.jsx)(l.Z,{children:"\u05e1\u05d5\u05d2 \u05d4\u05de\u05e9\u05e7\u05d5\u05dc\u05ea"}),(0,I.jsxs)(l.Z,{children:[" ",e.state.dataLoaded&&(0,I.jsx)(f.Z,{onChange:function(e,t){return T(e,"weightType")},defaultData:e.state.weightType,name:"Weight",dataSource:"WeightTypes",lKey:"Value",value:"Value",label:"\u05de\u05e9\u05e7\u05dc (\u05e7'\u05d2)"})," "]})]}),(0,I.jsxs)(c.Z,{className:"px-3 pt-3",children:[(0,I.jsx)(l.Z,{children:'\u05e7"\u05d2 \u05dc\u05de\u05d8\u05e8 \u05e4\u05e0\u05dc \u05de\u05e8\u05d5\u05d1\u05e2'}),(0,I.jsx)(l.Z,{children:(0,I.jsx)(g.Z,{id:"weight-type",label:"\u05d4\u05d6\u05d9\u05e0\u05d5 \u05d0\u05ea \u05d4\u05de\u05e1\u05e4\u05e8",value:e.state.weightSquare,onChange:function(e){return T(e.target.value,"weightSquare")},autoComplete:"off",color:"primary",InputProps:{inputProps:{min:0,type:"number"}}})})]})]}),e.state.roofTypeId==x.Lm.ISKURIT&&e.state.fetotDirection==x.T2.PARALLEL&&(0,I.jsxs)(I.Fragment,{children:[(0,I.jsxs)(c.Z,{className:"px-3",children:[(0,I.jsx)(l.Z,{children:(0,I.jsx)("span",{children:"\u05de\u05e8\u05d7\u05e7 \u05d1\u05d9\u05df \u05d8\u05e8\u05e4\u05d6\u05d9\u05dd"})}),(0,I.jsx)(l.Z,{children:(0,I.jsx)(g.Z,{id:"trapezoid-distance",label:"\u05de\u05e8\u05d7\u05e7 (\u05de''\u05de)",value:e.state.trapezoidDistance,onChange:function(e){return T(e.target.value,"trapezoidDistance")},autoComplete:"off",color:"primary",InputProps:{inputProps:{min:0,type:"number",step:.01}}})})]}),(0,I.jsxs)(c.Z,{className:"px-3 pt-3",children:[(0,I.jsx)(l.Z,{children:(0,I.jsx)("span",{className:"",children:"\u05e1\u05d5\u05d2 \u05d8\u05e8\u05e4\u05d6"})}),(0,I.jsx)(l.Z,{children:e.state.dataLoaded&&(0,I.jsx)(f.Z,{onChange:function(e,t){return T(e,"trapezoidTypes")},defaultData:e.state.trapezoidTypes,name:"TrapezoidTypes",dataSource:"TrapezoidTypes",lKey:"Key",value:"Value",label:"\u05e1\u05d5\u05d2 \u05d8\u05e8\u05e4\u05d6"})})]}),e.state.trapezoidTypes==x.p4.TRAPEZOID&&(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)("h4",{className:"py-3",children:"\u05de\u05d9\u05d3\u05d5\u05ea \u05d8\u05e8\u05e4\u05d6 \u05e2\u05dc\u05d9\u05d5\u05df"}),(0,I.jsx)(f.Z,{className:"px-3 pt-3",onChange:function(e,t){return T(e,"trapezoidUpperSize")},defaultData:e.state.trapezoidUpperSize,name:"TrapezoidUpperSize",dataSource:"TrapezoidUpperSizeTypes",lKey:"Key",value:"Value",label:"\u05de\u05d9\u05d3\u05d5\u05ea \u05d8\u05e8\u05e4\u05d6 \u05e2\u05dc\u05d9\u05d5\u05df"})]})]}),e.state.roofTypeId==x.Lm.KAL_ZIP&&(0,I.jsx)(I.Fragment,{children:(0,I.jsxs)(c.Z,{className:"px-3 pt-3",children:[(0,I.jsx)(l.Z,{children:"\u05de\u05e8\u05d7\u05e7 \u05d1\u05d9\u05df \u05e7\u05dc \u05d6\u05d9\u05e4"}),(0,I.jsx)(l.Z,{children:(0,I.jsx)(g.Z,{id:"kalzip-distance",label:"\u05de\u05e8\u05d7\u05e7 (\u05de''\u05de)",value:e.state.realspace,onChange:function(e){return T(e.target.value,"realspace")},autoComplete:"off",color:"primary",InputProps:{inputProps:{min:0,type:"number"}}})})]})})]})})}var N=n(2499),b=(n(8614),n(6155)),L=function(e){var t=(0,i.useState)([]),n=(0,u.Z)(t,2),v=n[0],S=n[1],D=(0,i.useReducer)(y.reducer,y.initialState),E=(0,u.Z)(D,2),L=E[0],C=E[1],O=(0,i.useState)([]),A=(0,u.Z)(O,2),P=A[0],R=A[1],z=(0,h.TH)(),F=new m.Z,U=(0,h.UO)(),w=U.projectId,K=U.activeId,k=void 0===K?1:K,M=(0,i.useContext)(T.default);(0,i.useEffect)((function(){function t(){return(t=(0,o.Z)((0,a.Z)().mark((function e(){var t,s,o,u,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r();case 2:t=e.sent,s=M.stepsData.all,console.log(s),Z.setDataLoaded(C,!0),s&&s.UserId&&(Z.setPlannerDefault(C,s.UserId),Z.setCustomersDefault(C,s.customerId),Z.setPlanner(C,s.UserId),Z.setCustomers(C,s.customerId),i=null!==z&&void 0!==z&&null!==(o=z.state)&&void 0!==o&&o.projectName?null===z||void 0===z||null===(u=z.state)||void 0===u?void 0:u.projectName:s.projectName,R(i)),n(s,t),Z.setDataLoaded(C,!0);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}e.displaySketcher(!1),function(){t.apply(this,arguments)}();var n=function(e,t){if(e.roofTypeDataArr&&e.roofTypeDataArr.length>0)S(e.roofTypeDataArr);else{var n=(0,s.Z)(v),r=new b.default;if(r.roofTypes=t,e.roofTypeDataArr)for(var a=0;a<e.roofTypeDataArr.length;a++)n.push(r);else n.push(r);S(n)}};function r(){return u.apply(this,arguments)}function u(){return(u=(0,o.Z)((0,a.Z)().mark((function e(){var t,n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={name:"RoofTypes"},e.next=3,F.Get("Data/DataSource",t);case 3:if(!(n=e.sent)||!n.Table){e.next=7;break}return Z.setRoofTypes(C,n.Table),e.abrupt("return",n.Table);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return function(){Z.setRoofTypes(C,[])}}),[]);return(0,I.jsxs)("form",{className:"",onSubmit:function(t){t.preventDefault();var n=!1;if(L.planner||L.customers){var a={stepIndex:k,UserId:L.planner?L.planner:L.plannerDefault,customerId:L.customers?L.customers:L.customersDefault,createBy:"Netser",isDraft:!0,status:1,projectName:P,ProjectId:w,roofTypeDataArr:[]};w&&(a.projectId=w),v.map((function(e){e.fetotDirection=e.roofTypeId==x.Lm.KAL_ZIP?2:e.fetotDirection,a.roofTypeDataArr.push((0,r.Z)({},e)),e.modalType||(alert("\u05d1\u05d7\u05e8 \u05e1\u05d5\u05d2 \u05d4\u05ea\u05e7\u05e0\u05d4. "),n=!0)})),e.OnSubmit(t,a,n)}else{e.OnSubmit(t,null)}},id:"step".concat(k),children:[(0,I.jsx)("h2",{className:"text-center",children:"\u05e4\u05e8\u05d5\u05d9\u05e7\u05d8"}),(0,I.jsxs)(c.Z,{className:"px-3 py-3",children:[(0,I.jsx)(l.Z,{md:4,children:"\u05e9\u05dd \u05e4\u05e8\u05d5\u05d9\u05d9\u05e7\u05d8"}),(0,I.jsxs)(l.Z,{children:[" ",(0,I.jsx)(g.Z,{id:"outlined-basic",label:"\u05e9\u05dd \u05d4\u05e4\u05e8\u05d5\u05d9\u05d9\u05e7\u05d8",value:P,onChange:function(e){return R(e.target.value)},autoComplete:"off",color:"primary"})]})]}),(0,I.jsxs)(c.Z,{className:"px-3 py-3",children:[(0,I.jsx)(l.Z,{md:4,children:"\u05d1\u05d7\u05e8 \u05de\u05ea\u05db\u05e0\u05df"}),(0,I.jsx)(l.Z,{children:L.dataLoaded&&(0,I.jsx)(f.Z,{onChange:function(e,t){return Z.setPlanner(C,e)},defaultData:L.plannerDefault,name:"Planner",dataSource:"Planners",lKey:"Id",value:"UserName",label:"\u05e9\u05dd \u05de\u05ea\u05db\u05e0\u05df"})})]}),(0,I.jsxs)(c.Z,{className:"px-3 py-3",children:[(0,I.jsx)(l.Z,{md:4,children:"\u05d1\u05d7\u05e8 \u05dc\u05e7\u05d5\u05d7"}),(0,I.jsx)(l.Z,{children:L.dataLoaded&&(0,I.jsx)(f.Z,{onChange:function(e,t){return Z.setCustomers(C,e)},defaultData:L.customersDefault,name:"Customers",dataSource:"Customers",lKey:"Id",value:"Name",label:"\u05e9\u05dd \u05e1\u05e4\u05e7"})})]}),(0,I.jsx)(c.Z,{className:"px-5",children:(0,I.jsx)(l.Z,{md:{span:3,offset:3},children:(0,I.jsx)(j.default,{OnSubmit:function(){Z.setDataLoaded(C,!1),Z.setDataLoaded(C,!0)}})})}),(0,I.jsxs)(N.mQ,{className:"pt-5",children:[(0,I.jsxs)(N.td,{children:[L.dataLoaded&&v&&v.map((function(e,t){return(0,I.jsxs)(N.OK,{children:[(0,I.jsx)("span",{id:"remove-tab",className:t>0?"":"hide",onClick:function(){return function(e){if(confirm("Are you sure?")&&e>0){var t=(0,s.Z)(v);t.splice(e,1),S(t)}}(t)},children:(0,I.jsx)(p.Z,{})})," \u05d2\u05d2-",t]})})),(0,I.jsx)("span",{id:"add-tab",onClick:function(){var e=new b.default;e.roofTypes=L.roofTypes,v.push(e);var t=(0,s.Z)(v);S(t)},children:(0,I.jsx)(d.Z,{})})]}),L.dataLoaded&&v&&v.map((function(e,t){return(0,I.jsx)(N.x4,{children:(0,I.jsx)(_,{updateState:function(e,n){return function(e,t,n){var r=(0,s.Z)(v);r[n][t]=e,S(r)}(e,n,t)},state:e,id:t})})}))]})]})}},6567:function(e,t,n){"use strict";n.r(t),n.d(t,{SET_CUSTOMERS:function(){return s},SET_CUSTOMERS_DEFAULT:function(){return i},SET_DATA_LOADED:function(){return l},SET_FETOT_DIRECTION:function(){return u},SET_PLANNER:function(){return o},SET_PLANNER_DEFAULT:function(){return c},SET_ROOF_SELECTED:function(){return r},SET_ROOF_TYPES:function(){return a},setCustomers:function(){return f},setCustomersDefault:function(){return T},setDataLoaded:function(){return x},setFetotDirection:function(){return h},setPlanner:function(){return m},setPlannerDefault:function(){return y},setRoofSelected:function(){return p},setRoofTypes:function(){return d}});var r="SET_ROOF_SELECTED",a="SET_ROOF_TYPES",s="SET_CUSTOMERS",o="SET_PLANNER",u="SET_FETOT_DIRECTION",i="SET_CUSTOMERS_DEFAULT",c="SET_PLANNER_DEFAULT",l="SET_DATA_LOADED",p=function(e,t){return e({type:r,payload:t})},d=function(e,t){return e({type:a,payload:t})},f=function(e,t){return e({type:s,payload:t})},m=function(e,t){return e({type:o,payload:t})},h=function(e,t){return e({type:u,payload:t})},T=function(e,t){return e({type:i,payload:t})},y=function(e,t){return e({type:c,payload:t})},x=function(e,t){return e({type:l,payload:t})}},9840:function(e,t,n){"use strict";n.r(t),n.d(t,{initialState:function(){return s},reducer:function(){return o}});var r=n(1413),a=n(6567),s={roofTypeId:null,roofTypes:[],customers:"",planner:"",fetotDirection:null,customersDefault:"",plannerDefault:"",dataLoaded:!1},o=function(e,t){var n=t.type,s=t.payload;switch(n){case a.SET_CUSTOMERS:return(0,r.Z)((0,r.Z)({},e),{},{customers:s});case a.SET_CUSTOMERS_DEFAULT:return(0,r.Z)((0,r.Z)({},e),{},{customersDefault:s});case a.SET_FETOT_DIRECTION:return(0,r.Z)((0,r.Z)({},e),{},{fetotDirection:s});case a.SET_PLANNER:return(0,r.Z)((0,r.Z)({},e),{},{planner:s});case a.SET_PLANNER_DEFAULT:return(0,r.Z)((0,r.Z)({},e),{},{plannerDefault:s});case a.SET_ROOF_SELECTED:return(0,r.Z)((0,r.Z)({},e),{},{roofTypeId:s});case a.SET_DATA_LOADED:return(0,r.Z)((0,r.Z)({},e),{},{dataLoaded:s});case a.SET_ROOF_TYPES:return(0,r.Z)((0,r.Z)({},e),{},{roofTypes:s});default:return e}}},3745:function(e,t,n){"use strict";var r=n(4836);t.Z=void 0;var a=r(n(5045)),s=n(6417),o=(0,a.default)((0,s.jsx)("path",{d:"M14.59 8 12 10.59 9.41 8 8 9.41 10.59 12 8 14.59 9.41 16 12 13.41 14.59 16 16 14.59 13.41 12 16 9.41 14.59 8zM12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"}),"HighlightOff");t.Z=o},5484:function(e,t,n){"use strict";var r=n(4836);t.Z=void 0;var a=r(n(5045)),s=n(6417),o=(0,a.default)([(0,s.jsx)("path",{d:"M17 19.22H5V7h7V5H5c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-7h-2v7.22z"},"0"),(0,s.jsx)("path",{d:"M19 2h-2v3h-3c.01.01 0 2 0 2h3v2.99c.01.01 2 0 2 0V7h3V5h-3V2zM7 9h8v2H7zm0 3v2h8v-2h-3zm0 3h8v2H7z"},"1")],"PostAdd");t.Z=o},5045:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r.createSvgIcon}});var r=n(8095)},8095:function(e,t,n){"use strict";n.r(t),n.d(t,{capitalize:function(){return a.Z},createChainedFunction:function(){return s.Z},createSvgIcon:function(){return o.Z},debounce:function(){return u.Z},deprecatedPropType:function(){return i},isMuiElement:function(){return c.Z},ownerDocument:function(){return l.Z},ownerWindow:function(){return p.Z},requirePropFactory:function(){return d},setRef:function(){return f},unstable_ClassNameGenerator:function(){return v},unstable_useEnhancedEffect:function(){return m.Z},unstable_useId:function(){return h.Z},unsupportedProp:function(){return T},useControlled:function(){return y.Z},useEventCallback:function(){return x.Z},useForkRef:function(){return Z.Z},useIsFocusVisible:function(){return j.Z}});var r=n(1271),a=n(1615),s=n(5038),o=n(4750),u=n(8706);var i=function(e,t){return function(){return null}},c=n(7816),l=n(6106),p=n(3533);n(7462);var d=function(e,t){return function(){return null}},f=n(9265).Z,m=n(4993),h=n(7677);var T=function(e,t,n,r,a){return null},y=n(3800),x=n(3236),Z=n(6983),j=n(7037),v={configure:function(e){console.warn(["MUI: `ClassNameGenerator` import from `@mui/material/utils` is outdated and might cause unexpected issues.","","You should use `import { unstable_ClassNameGenerator } from '@mui/material/className'` instead","","The detail of the issue: https://github.com/mui/material-ui/issues/30011#issuecomment-1024993401","","The updated documentation: https://mui.com/guides/classname-generator/"].join("\n")),r.Z.configure(e)}}},4836:function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports}}]);