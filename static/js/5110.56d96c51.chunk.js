"use strict";(self.webpackChunksolar_pro_react=self.webpackChunksolar_pro_react||[]).push([[5110,6155,6567,9840],{26155:function(e,t,a){a.r(t),a.d(t,{default:function(){return s}});var r=a(43144),n=a(15671),s=(0,r.Z)((function e(){(0,n.Z)(this,e),this.fetotDirection=null,this.roofTypeId="",this.roofTypes=[],this.realspace=null,this.trapezoidUpperSize=null,this.trapezoidTypes=null,this.dataLoaded=!0,this.fetotDirection=null,this.modalTypes=null,this.modalType=null}))},65617:function(e,t,a){a.r(t),a.d(t,{default:function(){return b}});var r=a(1413),n=a(74165),s=a(42982),o=a(15861),u=a(70885),i=a(47313),l=a(63849),c=a(31616),p=a(3745),d=a(25484),f=a(74686),T=a(75898),m=a(97890),h=a(65958),y=a(9840),x=a(92877),Z=a(46567),j=a(13792),v=a(54299),S=a(83929),D=a(74268),E=a(7397),I=a(16783),g=a(46417);function N(e){var t,a,r=new T.Z,s=(0,i.useState)([]),p=(0,u.Z)(s,2),d=p[0],m=p[1];(0,i.useEffect)((function(){Z(e.state.roofTypeId,e.state.fetotDirection)}),[e.state]);var h=function(t,a){e.updateState(t,a)},y=function(){var t=(0,o.Z)((0,n.Z)().mark((function t(a){var r,s;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=a.target.value,h(r,"roofTypeId"),r!=x.Lm.FLAT&&(h("","weightType"),h("","weightSquare")),r!=x.Lm.KAL_ZIP&&h("","realspace"),r!=x.Lm.ISKURIT&&(h("","trapezoidDistance"),h("","fetotDirection"),h("","trapezoidUpperSize"),h("","trapezoidTypes")),s=e.state.roofTypes.find((function(e){return e.Key==r})).Value,h(s,"roofTypeText"),r==x.Lm.ISKURIT){t.next=10;break}return t.next=10,Z(r,e.state.fetotDirection);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();function Z(e,t){return j.apply(this,arguments)}function j(){return(j=(0,o.Z)((0,n.Z)().mark((function e(t,a){var s,o,u,i;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s={RoofTypeId:t,FetotDirectionId:""==a?null:a},o=JSON.stringify(s),u={name:"ModalTypes",parameters:o},e.next=5,r.Get("Data/DataSource",u);case 5:(i=e.sent)&&i.Table&&m(i.Table);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,g.jsx)(g.Fragment,{children:(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(v.Z,{className:"px-5","aria-labelledby":"roofTypes",name:"roofTypes",row:!0,value:null!==(t=e.state.roofTypeId)&&void 0!==t?t:"",onChange:y,children:Object.keys(e.state.roofTypes).map((function(t){return e.state.roofTypes[t].ImageName&&(0,g.jsx)(S.Z,{className:"px-5",sx:{mt:1,mr:1},labelPlacement:"start",value:e.state.roofTypes[t].Key,label:e.state.roofTypes[t].Value,control:(0,g.jsx)(D.Z,{icon:(0,g.jsx)(E.Z,{pWidth:130,src:e.state.roofTypes[t].ImageName}),checkedIcon:(0,g.jsx)(E.Z,{pWidth:130,class:"img-selected",src:e.state.roofTypes[t].ImageName})})},e.state.roofTypes[t].Key)}))}),e.state.roofTypeId==x.Lm.ISKURIT&&(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("span",{className:"px-3",children:"    \u05db\u05d9\u05d5\u05d5\u05df \u05e4\u05d8\u05d5\u05ea \u05dc\u05e6\u05e4\u05d5\u05df:"}),(0,g.jsxs)(v.Z,{className:"px-3",defaultValue:"2",name:"fetot-direction",value:null!==(a=e.state.fetotDirection)&&void 0!==a?a:"",onChange:function(t){h(t.target.value,"fetotDirection"),Z(e.state.roofTypeId,t.target.value)},id:"fetot-direction",children:[(0,g.jsx)(S.Z,{value:"1",control:(0,g.jsx)(D.Z,{required:!0}),label:"\u05e4\u05d8\u05d5\u05ea \u05de\u05d0\u05d5\u05e0\u05db\u05d5\u05ea \u05dc\u05e6\u05e4\u05d5\u05df"}),(0,g.jsx)(S.Z,{value:"2",control:(0,g.jsx)(D.Z,{required:!0}),label:"\u05e4\u05d8\u05d5\u05ea \u05de\u05e7\u05d1\u05d9\u05dc\u05d5\u05ea \u05dc\u05e6\u05e4\u05d5\u05df"})]})]}),(0,g.jsx)(l.Z,{className:"mb-5 pb-5 border-top",children:(0,g.jsxs)(c.Z,{children:[e.state.roofTypeText&&(0,g.jsxs)("h3",{className:"text-center py-3",children:["\u05d2\u05d2 ",e.state.roofTypeText]}),(0,g.jsx)("div",{children:d.length>0&&(0,g.jsx)(v.Z,{name:"modalType",row:!0,value:e.state.modalType||"",onChange:function(e){var t=d.find((function(t){return t.Key==e.currentTarget.value}));h(t.Value,"modalTypeText"),h(e.currentTarget.value,"modalType")},children:Object.keys(d).map((function(e){return d[e].ImageName&&(0,g.jsx)(S.Z,{labelPlacement:"bottom",value:d[e].Key,label:d[e].Value,control:(0,g.jsx)(D.Z,{icon:(0,g.jsx)(E.Z,{pWidth:"150",pHeight:"150",src:d[e].ImageName}),checkedIcon:(0,g.jsx)(E.Z,{class:"img-selected",pWidth:"160",pHeight:"160",src:d[e].ImageName})})},d[e].Key)}))})})]})}),e.state.roofTypeId==x.Lm.FLAT&&(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)(l.Z,{className:"px-3 pt-3",children:[(0,g.jsx)(c.Z,{children:"\u05e1\u05d5\u05d2 \u05d4\u05de\u05e9\u05e7\u05d5\u05dc\u05ea"}),(0,g.jsxs)(c.Z,{children:[" ",e.state.dataLoaded&&(0,g.jsx)(f.Z,{onChange:function(e,t){return h(e,"weightType")},defaultData:e.state.weightType,name:"Weight",dataSource:"WeightTypes",lKey:"Value",value:"Value",label:"\u05de\u05e9\u05e7\u05dc (\u05e7'\u05d2)"})," "]})]}),(0,g.jsxs)(l.Z,{className:"px-3 pt-3",children:[(0,g.jsx)(c.Z,{children:'\u05e7"\u05d2 \u05dc\u05de\u05d8\u05e8 \u05e4\u05e0\u05dc \u05de\u05e8\u05d5\u05d1\u05e2'}),(0,g.jsx)(c.Z,{children:(0,g.jsx)(I.Z,{id:"weight-type",label:"\u05d4\u05d6\u05d9\u05e0\u05d5 \u05d0\u05ea \u05d4\u05de\u05e1\u05e4\u05e8",value:e.state.weightSquare,onChange:function(e){return h(e.target.value,"weightSquare")},autoComplete:"off",color:"primary",InputProps:{inputProps:{min:0,type:"number"}}})})]})]}),e.state.roofTypeId==x.Lm.ISKURIT&&e.state.fetotDirection==x.T2.PARALLEL&&(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)(l.Z,{className:"px-3",children:[(0,g.jsx)(c.Z,{children:(0,g.jsx)("span",{children:"\u05de\u05e8\u05d7\u05e7 \u05d1\u05d9\u05df \u05d8\u05e8\u05e4\u05d6\u05d9\u05dd"})}),(0,g.jsx)(c.Z,{children:(0,g.jsx)(I.Z,{id:"trapezoid-distance",label:"\u05de\u05e8\u05d7\u05e7 (\u05de''\u05de)",value:e.state.trapezoidDistance,onChange:function(e){return h(e.target.value,"trapezoidDistance")},autoComplete:"off",color:"primary",InputProps:{inputProps:{min:0,type:"number",step:.01}}})})]}),(0,g.jsxs)(l.Z,{className:"px-3 pt-3",children:[(0,g.jsx)(c.Z,{children:(0,g.jsx)("span",{className:"",children:"\u05e1\u05d5\u05d2 \u05d8\u05e8\u05e4\u05d6"})}),(0,g.jsx)(c.Z,{children:e.state.dataLoaded&&(0,g.jsx)(f.Z,{onChange:function(e,t){return h(e,"trapezoidTypes")},defaultData:e.state.trapezoidTypes,name:"TrapezoidTypes",dataSource:"TrapezoidTypes",lKey:"Key",value:"Value",label:"\u05e1\u05d5\u05d2 \u05d8\u05e8\u05e4\u05d6"})})]}),e.state.trapezoidTypes==x.p4.TRAPEZOID&&(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("h4",{className:"py-3",children:"\u05de\u05d9\u05d3\u05d5\u05ea \u05d8\u05e8\u05e4\u05d6 \u05e2\u05dc\u05d9\u05d5\u05df"}),(0,g.jsx)(f.Z,{className:"px-3 pt-3",onChange:function(e,t){return h(e,"trapezoidUpperSize")},defaultData:e.state.trapezoidUpperSize,name:"TrapezoidUpperSize",dataSource:"TrapezoidUpperSizeTypes",lKey:"Key",value:"Value",label:"\u05de\u05d9\u05d3\u05d5\u05ea \u05d8\u05e8\u05e4\u05d6 \u05e2\u05dc\u05d9\u05d5\u05df"})]})]}),e.state.roofTypeId==x.Lm.KAL_ZIP&&(0,g.jsx)(g.Fragment,{children:(0,g.jsxs)(l.Z,{className:"px-3 pt-3",children:[(0,g.jsx)(c.Z,{children:"\u05de\u05e8\u05d7\u05e7 \u05d1\u05d9\u05df \u05e7\u05dc \u05d6\u05d9\u05e4"}),(0,g.jsx)(c.Z,{children:(0,g.jsx)(I.Z,{id:"kalzip-distance",label:"\u05de\u05e8\u05d7\u05e7 (\u05de''\u05de)",value:e.state.realspace,onChange:function(e){return h(e.target.value,"realspace")},autoComplete:"off",color:"primary",InputProps:{inputProps:{min:0,type:"number"}}})})]})})]})})}var L=a(22499),_=(a(78614),a(26155)),b=function(e){var t=(0,i.useState)([]),a=(0,u.Z)(t,2),v=a[0],S=a[1],D=(0,i.useReducer)(y.reducer,y.initialState),E=(0,u.Z)(D,2),b=E[0],C=E[1],A=(0,i.useState)([]),O=(0,u.Z)(A,2),R=O[0],z=O[1],P=(0,m.TH)(),U=new T.Z,F=(0,m.UO)(),w=F.projectId,K=F.activeId,k=void 0===K?1:K,V=(0,i.useContext)(h.default);(0,i.useEffect)((function(){function t(){return(t=(0,o.Z)((0,n.Z)().mark((function e(){var t,s,o,u,i;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r();case 2:t=e.sent,s=V.stepsData.all,console.log(s),Z.setDataLoaded(C,!0),s&&s.UserId&&(Z.setPlannerDefault(C,s.UserId),Z.setCustomersDefault(C,s.customerId),Z.setPlanner(C,s.UserId),Z.setCustomers(C,s.customerId),i=null!==P&&void 0!==P&&null!==(o=P.state)&&void 0!==o&&o.projectName?null===P||void 0===P||null===(u=P.state)||void 0===u?void 0:u.projectName:s.projectName,z(i)),a(s,t),Z.setDataLoaded(C,!0);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}e.displaySketcher(!1),function(){t.apply(this,arguments)}();var a=function(e,t){if(e.roofTypeDataArr&&e.roofTypeDataArr.length>0)S(e.roofTypeDataArr);else{var a=(0,s.Z)(v),r=new _.default;if(r.roofTypes=t,e.roofTypeDataArr)for(var n=0;n<e.roofTypeDataArr.length;n++)a.push(r);else a.push(r);S(a)}};function r(){return u.apply(this,arguments)}function u(){return(u=(0,o.Z)((0,n.Z)().mark((function e(){var t,a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={name:"RoofTypes"},e.next=3,U.Get("Data/DataSource",t);case 3:if(!(a=e.sent)||!a.Table){e.next=7;break}return Z.setRoofTypes(C,a.Table),e.abrupt("return",a.Table);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return function(){Z.setRoofTypes(C,[])}}),[]);return(0,g.jsxs)("form",{className:"",onSubmit:function(t){t.preventDefault();var a=!1;if(b.planner||b.customers){var n={stepIndex:k,UserId:b.planner?b.planner:b.plannerDefault,customerId:b.customers?b.customers:b.customersDefault,createBy:"Netser",isDraft:!0,status:1,projectName:R,ProjectId:w,roofTypeDataArr:[]};w&&(n.projectId=w),v.map((function(e){e.fetotDirection=e.roofTypeId==x.Lm.KAL_ZIP?2:e.fetotDirection,n.roofTypeDataArr.push((0,r.Z)({},e)),e.modalType||(alert("\u05d1\u05d7\u05e8 \u05e1\u05d5\u05d2 \u05d4\u05ea\u05e7\u05e0\u05d4. "),a=!0)})),e.OnSubmit(t,n,a)}else{e.OnSubmit(t,null)}},id:"step".concat(k),children:[(0,g.jsx)("h2",{className:"text-center",children:"\u05e4\u05e8\u05d5\u05d9\u05e7\u05d8"}),(0,g.jsxs)(l.Z,{className:"px-3 py-3",children:[(0,g.jsx)(c.Z,{md:4,children:"\u05e9\u05dd \u05e4\u05e8\u05d5\u05d9\u05d9\u05e7\u05d8"}),(0,g.jsxs)(c.Z,{children:[" ",(0,g.jsx)(I.Z,{id:"outlined-basic",label:"\u05e9\u05dd \u05d4\u05e4\u05e8\u05d5\u05d9\u05d9\u05e7\u05d8",value:R,onChange:function(e){return z(e.target.value)},autoComplete:"off",color:"primary"})]})]}),(0,g.jsxs)(l.Z,{className:"px-3 py-3",children:[(0,g.jsx)(c.Z,{md:4,children:"\u05d1\u05d7\u05e8 \u05de\u05ea\u05db\u05e0\u05df"}),(0,g.jsx)(c.Z,{children:b.dataLoaded&&(0,g.jsx)(f.Z,{onChange:function(e,t){return Z.setPlanner(C,e)},defaultData:b.plannerDefault,name:"Planner",dataSource:"Planners",lKey:"Id",value:"UserName",label:"\u05e9\u05dd \u05de\u05ea\u05db\u05e0\u05df"})})]}),(0,g.jsxs)(l.Z,{className:"px-3 py-3",children:[(0,g.jsx)(c.Z,{md:4,children:"\u05d1\u05d7\u05e8 \u05dc\u05e7\u05d5\u05d7"}),(0,g.jsx)(c.Z,{children:b.dataLoaded&&(0,g.jsx)(f.Z,{onChange:function(e,t){return Z.setCustomers(C,e)},defaultData:b.customersDefault,name:"Customers",dataSource:"Customers",lKey:"Id",value:"Name",label:"\u05e9\u05dd \u05e1\u05e4\u05e7"})})]}),(0,g.jsx)(l.Z,{className:"px-5",children:(0,g.jsx)(c.Z,{md:{span:3,offset:3},children:(0,g.jsx)(j.default,{OnSubmit:function(){Z.setDataLoaded(C,!1),Z.setDataLoaded(C,!0)}})})}),(0,g.jsxs)(L.mQ,{className:"pt-5",children:[(0,g.jsxs)(L.td,{children:[b.dataLoaded&&v&&v.map((function(e,t){return(0,g.jsxs)(L.OK,{children:[(0,g.jsx)("span",{id:"remove-tab",className:t>0?"":"hide",onClick:function(){return function(e){if(confirm("Are you sure?")&&e>0){var t=(0,s.Z)(v);t.splice(e,1),S(t)}}(t)},children:(0,g.jsx)(p.Z,{})})," \u05d2\u05d2-",t]})})),(0,g.jsx)("span",{id:"add-tab",onClick:function(){var e=new _.default;e.roofTypes=b.roofTypes,v.push(e);var t=(0,s.Z)(v);S(t)},children:(0,g.jsx)(d.Z,{})})]}),b.dataLoaded&&v&&v.map((function(e,t){return(0,g.jsx)(L.x4,{children:(0,g.jsx)(N,{updateState:function(e,a){return function(e,t,a){var r=(0,s.Z)(v);r[a][t]=e,S(r)}(e,a,t)},state:e,id:t})})}))]})]})}},46567:function(e,t,a){a.r(t),a.d(t,{SET_CUSTOMERS:function(){return s},SET_CUSTOMERS_DEFAULT:function(){return i},SET_DATA_LOADED:function(){return c},SET_FETOT_DIRECTION:function(){return u},SET_PLANNER:function(){return o},SET_PLANNER_DEFAULT:function(){return l},SET_ROOF_SELECTED:function(){return r},SET_ROOF_TYPES:function(){return n},setCustomers:function(){return f},setCustomersDefault:function(){return h},setDataLoaded:function(){return x},setFetotDirection:function(){return m},setPlanner:function(){return T},setPlannerDefault:function(){return y},setRoofSelected:function(){return p},setRoofTypes:function(){return d}});var r="SET_ROOF_SELECTED",n="SET_ROOF_TYPES",s="SET_CUSTOMERS",o="SET_PLANNER",u="SET_FETOT_DIRECTION",i="SET_CUSTOMERS_DEFAULT",l="SET_PLANNER_DEFAULT",c="SET_DATA_LOADED",p=function(e,t){return e({type:r,payload:t})},d=function(e,t){return e({type:n,payload:t})},f=function(e,t){return e({type:s,payload:t})},T=function(e,t){return e({type:o,payload:t})},m=function(e,t){return e({type:u,payload:t})},h=function(e,t){return e({type:i,payload:t})},y=function(e,t){return e({type:l,payload:t})},x=function(e,t){return e({type:c,payload:t})}},9840:function(e,t,a){a.r(t),a.d(t,{initialState:function(){return s},reducer:function(){return o}});var r=a(1413),n=a(46567),s={roofTypeId:null,roofTypes:[],customers:"",planner:"",fetotDirection:null,customersDefault:"",plannerDefault:"",dataLoaded:!1},o=function(e,t){var a=t.type,s=t.payload;switch(a){case n.SET_CUSTOMERS:return(0,r.Z)((0,r.Z)({},e),{},{customers:s});case n.SET_CUSTOMERS_DEFAULT:return(0,r.Z)((0,r.Z)({},e),{},{customersDefault:s});case n.SET_FETOT_DIRECTION:return(0,r.Z)((0,r.Z)({},e),{},{fetotDirection:s});case n.SET_PLANNER:return(0,r.Z)((0,r.Z)({},e),{},{planner:s});case n.SET_PLANNER_DEFAULT:return(0,r.Z)((0,r.Z)({},e),{},{plannerDefault:s});case n.SET_ROOF_SELECTED:return(0,r.Z)((0,r.Z)({},e),{},{roofTypeId:s});case n.SET_DATA_LOADED:return(0,r.Z)((0,r.Z)({},e),{},{dataLoaded:s});case n.SET_ROOF_TYPES:return(0,r.Z)((0,r.Z)({},e),{},{roofTypes:s});default:return e}}},3745:function(e,t,a){var r=a(64836);t.Z=void 0;var n=r(a(45045)),s=a(46417),o=(0,n.default)((0,s.jsx)("path",{d:"M14.59 8 12 10.59 9.41 8 8 9.41 10.59 12 8 14.59 9.41 16 12 13.41 14.59 16 16 14.59 13.41 12 16 9.41 14.59 8zM12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"}),"HighlightOff");t.Z=o},25484:function(e,t,a){var r=a(64836);t.Z=void 0;var n=r(a(45045)),s=a(46417),o=(0,n.default)([(0,s.jsx)("path",{d:"M17 19.22H5V7h7V5H5c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-7h-2v7.22z"},"0"),(0,s.jsx)("path",{d:"M19 2h-2v3h-3c.01.01 0 2 0 2h3v2.99c.01.01 2 0 2 0V7h3V5h-3V2zM7 9h8v2H7zm0 3v2h8v-2h-3zm0 3h8v2H7z"},"1")],"PostAdd");t.Z=o}}]);