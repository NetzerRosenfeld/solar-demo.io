"use strict";(self.webpackChunksolar_pro_react=self.webpackChunksolar_pro_react||[]).push([[1760],{27261:function(e,t,n){n.r(t),n.d(t,{default:function(){return S}});var r=n(42982),o=n(1413),a=n(70885),s=n(47313),i=n(63849),c=n(97890),l=n(37810),u=n(65958),d=n(7397),f=n(18415),h=n(92877),p=n(31616),x=n(1550),g=n(5178),v=n(54299),j=n(83929),m=n(74268),Z=n(95922),A=n(46417);function b(e){var t=(0,s.useState)("\u05d1\u05d7\u05e8"),n=(0,a.Z)(t,2),r=n[0],c=n[1],l=(0,s.useState)(!1),u=(0,a.Z)(l,2),b=u[0],k=u[1],S=(0,s.useState)(!1),y=(0,a.Z)(S,2),T=(y[0],y[1]),I=new Z.Z,D=(0,s.useState)(),w=(0,a.Z)(D,2),P=w[0],N=w[1],z=(0,s.useState)({x:0,y:0,direction:"up",maxYRange:0}),C=(0,a.Z)(z,2),E=C[0],M=C[1];(0,s.useEffect)((function(){return N(e.state.roofTypeId),e.state&&e.state.zeroPointAbsolute&&M(e.state.zeroPointAbsolute),(0,f.q)(O),T(!0),function(){(0,f.M)(O)}}),[r,e.state]);var O=function(e){var t=e.detail;0!=(null===t||void 0===t?void 0:t.code)&&2!=(null===t||void 0===t?void 0:t.code)||b&&(M((0,o.Z)((0,o.Z)({},E),t.point)),F((0,o.Z)((0,o.Z)({},E),t.point),"zeroPointAbsolute")),console.log(t,"I'm listening on solar pro to sketcher")},F=function(t,n){e.updateState(t,n)},H=function(){var t="label",n="ROOF",r={group:{text:"roof "+e.id,labelPositionY:4e3}};I.executeInSketcher(t,null,n,r),t="lockAll",I.executeInSketcher(t,null,n,r)};return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)("div",{children:[" ",e.state.roofTypeText]}),e.state&&P!=h.Lm.FLAT&&(0,A.jsx)(i.Z,{children:(0,A.jsx)(p.Z,{children:(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)("div",{className:"d-flex justify-content-center mt-3",children:[(0,A.jsx)("div",{className:"ms-3",children:"\u05d6\u05d5\u05d5\u05d9\u05ea \u05d4\u05d2\u05d2 \u05d1\u05d9\u05d7\u05e1 \u05dc\u05e7\u05e8\u05e7\u05e2"}),(0,A.jsx)("input",{value:e.state.roofAngle,onChange:function(e){return F(e.target.value,"roofAngle")},type:"number"})]}),(0,A.jsxs)(x.Z,{children:[(0,A.jsx)(g.Z,{id:"roof-angle"}),(0,A.jsxs)(v.Z,{row:!0,"aria-labelledby":"roof-angle",className:"step2-images mt-4",name:"roof-angle",value:e.state.direction||"",onChange:function(t){return function(t){F(t.currentTarget.value,"direction"),"north"==t.currentTarget.value?F(-Math.abs(e.state.roofAngle),"roofAngle"):F(Math.abs(e.state.roofAngle),"roofAngle")}(t)},children:[(0,A.jsx)(j.Z,{value:"north",label:"\u05d6\u05d5\u05d9\u05ea \u05dc\u05db\u05d9\u05d5\u05d5\u05df \u05e6\u05e4\u05d5\u05df",control:(0,A.jsx)(m.Z,{icon:(0,A.jsx)(d.Z,{pWidth:"100",pHeight:"100",src:"angle-to-north.jpg"}),checkedIcon:(0,A.jsx)(d.Z,{pWidth:"120",pHeight:"120",class:"img-selected",src:"angle-to-north.jpg"})})},"north"),(0,A.jsx)(j.Z,{value:"south",label:"\u05d6\u05d5\u05d9\u05ea \u05dc\u05db\u05d9\u05d5\u05d5\u05df \u05d3\u05e8\u05d5\u05dd",control:(0,A.jsx)(m.Z,{icon:(0,A.jsx)(d.Z,{pWidth:"100",pHeight:"100",src:"angle-to-south.jpg"}),checkedIcon:(0,A.jsx)(d.Z,{pWidth:"120",pHeight:"120",class:"img-selected",src:"angle-to-south.jpg"})})},"south")]})]})]})})}),(0,A.jsx)("p",{className:"text-center p-3",children:"\u05d0\u05d7\u05e8\u05d9 \u05e1\u05d9\u05d5\u05dd \u05e9\u05e8\u05d8\u05d5\u05d8 \u05d4\u05d2\u05d2 \u05dc\u05d7\u05e5 \u05e2\u05dc \u05d4\u05db\u05e4\u05ea\u05d5\u05e8 \u05d1\u05d7\u05e8 \u05d5\u05e1\u05de\u05df \u05d0\u05ea \u05e8\u05d0\u05e9\u05d9\u05ea \u05d4\u05e6\u05d9\u05e8\u05d9\u05dd \u05e9\u05dc \u05d4\u05d2\u05d2 \u05d1\u05d3\u05e8\u05da \u05db\u05dc\u05dc \u05d4\u05e0\u05e7\u05d5\u05d3\u05d4 \u05d4\u05e9\u05de\u05d0\u05dc\u05d9\u05ea \u05d4\u05ea\u05d7\u05ea\u05d5\u05e0\u05d4. \u05d5\u05d1\u05e1\u05d9\u05d5\u05dd \u05dc\u05d7\u05e5 \u05e2\u05dc \u05db\u05e4\u05ea\u05d5\u05e8 \u05d0\u05d9\u05e9\u05d5\u05e8."}),(0,A.jsxs)("div",{className:"d-flex justify-content-around",children:[(0,A.jsxs)("div",{children:["(",Math.ceil(null===E||void 0===E?void 0:E.x),",",Math.ceil(null===E||void 0===E?void 0:E.y),")"]}),(0,A.jsx)("button",{className:"bg-dark text-white",onClick:function(e){k(!b),b?(c("\u05d1\u05d7\u05e8"),H()):c("\u05d0\u05d9\u05e9\u05d5\u05e8"),e.stopPropagation(),e.preventDefault()},children:r})]})]})}var k=n(22499),S=(n(78614),function(e){var t=(0,c.UO)(),n=t.projectId,d=t.stepId,f=(new Z.Z,(0,s.useState)()),h=(0,a.Z)(f,2),p=h[0],x=h[1],g=new l.Z,v=(0,s.useContext)(u.default),j=(0,s.useState)([{direction:"",roofAngle:""}]),m=(0,a.Z)(j,2),S=m[0],y=m[1],T=(0,s.useState)(!1),I=(0,a.Z)(T,2),D=I[0],w=I[1];(0,s.useEffect)((function(){e.displaySketcher(!1),function(){var e=v.stepsData.all;if(x(e.UserId),e.roofDataArr&&e.roofDataArr.length>0)y(e.roofDataArr);else if(e.roofTypeDataArr&&e.roofTypeDataArr.length>0){for(var t=[],n=0;n<e.roofTypeDataArr.length;n++){var r=e.roofTypeDataArr[n];t.push({direction:"",roofAngle:"",roofTypeId:r.roofTypeId,roofTypeText:r.roofTypeText})}y(t)}w(!0)}()}),[]);return(0,A.jsx)(A.Fragment,{children:(0,A.jsx)(i.Z,{className:"",children:(0,A.jsxs)("form",{onSubmit:function(t){var r=!1,a={ProjectId:n,stepIndex:d,isDraft:!0,UserId:p,roofData:{},roofDataArr:[]};S.map((function(e,t){e.zeroPointAbsolute||(alert("no zero point was selected"),r=!0,console.error("no zero point was selected")),a.roofDataArr.push((0,o.Z)({},e))})),g.saveSkecherDataInServer(a),r?e.OnSubmit(t,a,r):e.OnSubmit(t,a)},id:"step2",children:[(0,A.jsx)("h2",{className:"text-center",children:"\u05e9\u05e8\u05d8\u05d8 \u05d0\u05ea \u05d4\u05d2\u05d2"}),(0,A.jsxs)(k.mQ,{children:[(0,A.jsx)(k.td,{children:D&&S&&S.map((function(e,t){return(0,A.jsxs)(k.OK,{children:["\u05d2\u05d2-",t]})}))}),D&&S&&S.map((function(e,t){return(0,A.jsx)(k.x4,{children:(0,A.jsx)(b,{updateState:function(e,n){return function(e,t,n){var o=(0,r.Z)(S);o[n][t]=e,y(o)}(e,n,t)},state:e,id:t})})}))]})]})})})})},18415:function(e,t,n){n.d(t,{M:function(){return o},q:function(){return r}});var r=function(e){document.addEventListener("sketcherPickedEvent",e,!1)},o=function(e){document.removeEventListener("sketcherPickedEvent",e,!1)}}}]);